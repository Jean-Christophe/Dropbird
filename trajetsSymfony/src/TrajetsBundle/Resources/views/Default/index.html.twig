{% extends "base.html.twig" %}

    {% block title %}Exemple Maps{% endblock %}
{% block body %}
    <div class="container">
        <div class="options-box">
            <h1>Calcul du trajet</h1>
            {{ app.session.get('collecteur') }}
            <div>
                <input id="show_consignes" type="button" value="Montrer les consignes" />
                <input id="hide_consignes" type="button" value="Cacher les consignes" />
                <input id="show_boutiques" type="button" value="Montrer les boutiques" />
                <input id="hide_boutiques" type="button" value="Cacher les boutiques" />
                <input id="show_all" type="button" value="Montrer tout" />
                <input id="hide_all" type="button" value="Cacher tout" />
                <div>
                    <div>
                        <span class="text">Destination</span>
                        <select id="origine">
                            <optgroup label="Boutiques">
                                {% for boutique in boutiques  %}
                                    <option class="id_boutique" value="{{ boutique.id }}">{{ boutique.nom }}</option>
                                {% endfor %}
                            </optgroup>
                            <optgroup label="Consignes">
                                {% for consigne in consignes  %}
                                    <option class="id_consigne" value="{{ consigne.id }}">{{ consigne.nom }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </div>
                    <div>
                        <span class="text">Durée max.</span>
                        <select id="duree_max">
                            <option value="10">10 min</option>
                            <option value="15">15 min</option>
                            <option value="30">30 min</option>
                        </select>
                        <select id="moyen_locomotion">
                            <option value="BICYCLING">à vélo</option>
                            <option value="DRIVING">en voiture</option>
                        </select>
                        <div id="adresse_origine">
                            <span class="text">Départ</span>
                            <input id="adresse_depart" type="text" placeholder="Ex. : Métro République, Rennes" />
                            <input id="valider_adresse_depart" type="button" value="Valider" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="map"></div>
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        // Initialisation des variables globales collecteur, consignes et boutiques
        // utiles dans map_loader.js
        collecteur = {{ collecteur|json_encode|raw }};

        consignes = [];
        {% for consigne in consignes %}
        consignes.push({{ consigne|json_encode|raw }});
        {% endfor %}

        boutiques = [];
        {% for boutique in boutiques %}
        boutiques.push({{ boutique|json_encode|raw }});
        {% endfor %}

    </script>
    <script src="{{ app.request.getBasePath() }}/js/map_loader.js"></script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAICexFtyn5myRq8c6pot701UuvybNOE0Y&v=3&callback=initMap">
    </script>
    <!-- Pour StreetView
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyAICexFtyn5myRq8c6pot701UuvybNOE0Y&v=3&callback=initMap">
    </script>
    -->
{% endblock %}